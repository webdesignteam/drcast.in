<?phpClass User_model extends CI_Model {    var $CI;    function __construct() {        parent::__construct();        $this->CI = & get_instance();        $this->CI->load->database('default',true);		// $this->remote=$this->load->database('remote',true);        $this->CI->load->helper('url');		// error_reporting(E_ALL); ini_set('display_errors', 1);     }	public function isDataExist($table, $where) {        $this->db->trans_start();        $this->db->select('*');        $this->db->from($table);        $this->db->where($where);        $query = $this->db->get();		// echo $this->db->last_query();        $this->db->trans_complete();        if ($this->db->trans_status() === FALSE) {            return FALSE;        } else {            if ($query->num_rows() > 0) {                return TRUE;            } else {                return FALSE;            }        }    }	public function insertData($table, $data) {        $this->db->trans_start();        $this->db->insert($table, $data);        $insert_id = $this->db->insert_id();		// echo $this->db->last_query();        $this->db->trans_complete();        if ($this->db->trans_status() === FALSE) {            return FALSE;        } else {            if ($insert_id > 0) {                return $insert_id;            } else {                return FALSE;            }        }    }    public function insert_batch($table, $data) {		$result = $this->db->insert_batch($table, $data);		if($this->db->affected_rows() >= 1) return TRUE;		return FALSE;	}    public function updateData($table, $data, $where) {        $this->db->trans_start();        $this->db->where($where);        $this->db->update($table, $data);        $afftectedRows = $this->db->affected_rows();        $this->db->trans_complete();        // echo $this->db->last_query();		if ($this->db->trans_status() === FALSE) {            return false;        } else {            if ($afftectedRows > 0) {                return TRUE;            } else {                return TRUE;            }        }    }    public function deleteData($table, $pkey) {        $this->db->trans_start();        $this->db->delete($table, $pkey);        $delete_rows = $this->db->affected_rows();        $this->db->trans_complete();        if ($this->db->trans_status() === FALSE) {            return FALSE;        } else {            if ($delete_rows > 0) {                return $delete_rows;            } else {                return FALSE;            }        }    }	public function getData($table,$where) {        $this->db->trans_start();        $this->db->select('*');        $this->db->from($table);        $this->db->where($where);        $query = $this->db->get();		//echo $this->db->last_query(); exit;        $data = $query->result_array();		$this->db->trans_complete();        if ($this->db->trans_status() === FALSE) {            return FALSE;        } else {            if ($query->num_rows() >= 1) {                return $data;            } else {                return FALSE;            }        }    }    public function getCount($table, $where, $groupby){		$this->db->trans_start();			$this->db->select('*');		$this->db->from($table);		if (empty($where)){} else{$this->db->where($where);}		if (empty($where)){} else{$this->db->group_by($groupby);}		$query = $this->db->get();		//echo $this->db->last_query(); exit;		$this->db->trans_complete();		if ($this->db->trans_status() === FALSE)		{						return false;		}		else		{						if($query->num_rows() > 0)			{				return $query->num_rows();			}			else			{								return false;			}		}	}	// Get Queries	public function getQueries($webinar_code) { 	    //echo $webinar_code; exit;	   	$this->db->select('Que_Code,Que_autoID,Que_name,Que_Query,Que_createdOn,Que_status');		$this->db->from(TBLQUERY);		$this->db->where('Que_status',1002);		$this->db->where('Que_webinar', $webinar_code);		$this->db->order_by('Que_autoID','asc');		$data = $this->db->get()->result();        return $data;    }	public function getQuery($webinar_code) { 	   	$this->db->select('Que_Code,Que_autoID,Que_name,Que_Query,Que_createdOn,Que_status');		$this->db->from(TBLQUERY);		$this->db->where('Que_status',1001);		$this->db->where('Que_webinar',$webinar_code);		$this->db->order_by('Que_autoID','asc');		$data = $this->db->get()->result();        return $data;    }	public function getParticipants($webinar_code) { 	    //echo $webinar_code; exit;		$this->db->from(TBLREG);		$this->db->where('user_webinarname',$webinar_code);		$data = $this->db->get()->result();		 //echo $data; exit;        return $data;    }    public function getLoggedUsers($webinar_code, $DATEFROM, $DATETO) {        $query = $this->db->query("SELECT A.`user_fullname`,A.`user_email`,A.`user_mobilenumber`,A.`user_city`,A.`user_state`,MAX(B.log_loggedOn) As log_loggedOn FROM users AS A LEFT JOIN userlog AS B ON A.user_Code = B.log_userCode WHERE A.user_Code = B.log_userCode AND A.user_webinarname = '$webinar_code' AND B.log_loggedOn BETWEEN '$DATEFROM' AND '$DATETO' GROUP BY B.log_userCode");        //echo $this->db->last_query(); exit;        //echo "<pre>"; print_r($query->result_array()); exit;		$result = $query->result_array();        return $result;    }	/*public function getLoggedUsers($WEBINARNAME, $DATEFROM, $DATETO) {		$query = $this->db->query("SELECT    A.`user_fullname`,    A.`user_email`,    A.`user_mobilenumber`,    A.`user_city`,    A.`user_state`,    MAX(B.log_loggedOn) As log_loggedOnFROM    users AS ALEFT JOIN userlog AS BON    A.user_email = B.log_userCodeWHERE    A.user_email = B.log_userCode AND A.user_webinarname = '$WEBINARNAME' AND B.log_loggedOn BETWEEN '$DATEFROM' AND '$DATETO'GROUP BY    B.log_userCode");		echo $this->db->last_query(); exit;		$result = $query->result_array();        return $result;    }*/    public function getpollresults($WEBINARNAME) {		$query = $this->db->query("SELECT A.pool_autoID,A.pool_results,B.user_fullname,C.pool_createdon FROM pool_results AS A LEFT JOIN users AS B ON A.user_autoID = B.user_autoID LEFT JOIN pool AS C ON A.pool_autoID = C.pool_autoID WHERE C.webinar_code = '$WEBINARNAME'");		//echo $this->db->last_query(); exit;		$result = $query->result_array();        return $result;    }    public function getpollcount($WEBINARNAME) {		$query = $this->db->query("SELECT COUNT(*) AS COUNT, `pool_results` FROM pool_results AS A LEFT JOIN pool AS B ON A.pool_autoID = B.pool_autoID WHERE B.webinar_code = '$WEBINARNAME' GROUP BY pool_results");		//echo $this->db->last_query(); exit;		$result = $query->result_array();        return $result;    }}